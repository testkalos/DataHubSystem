---
title: Arcana
layout: default
---
	
<!-- Main -->
	<section class="wrapper style1">
		<div class="container">
			<div class="row double">
				<div class="4u">
					{% include sidebar.html %}
				</div>
				<div class="8u skel-cell-important">
					<div id="content">

						<!-- Content -->
					
							<article>
								<header>
									<h2>Installation Guide</h2>
									<p>Welcome to the Installation Guide</p>
								</header>
								
								<span class="image featured"><img src="assets/images/banner.jpg" alt="" /></span>
						<section class="wrapper style1">
	
                     <h3>Introduction</h3>
<p ALIGN="JUSTIFY">The DHuS is a web application, running within a Java Virtual Machine. All its middleware components, such as database and application servers, run inside the JVM container. In order to allow integration into a hosting environment, the application needs to be installed and configured having well in mind what are the external interfaces to be used. The application needs to manage two flows:</p>
<p ALIGN="JUSTIFY">&bull; the incoming flow: during the products ingestion process, the DHuS SW picks up products (compressed or not) from a folder and move them into another folder. We will call those folders, respectively, inbox and incoming.</p>
<p ALIGN="JUSTIFY">&bull; the outgoing flow (how external users can search and download published data): this can happen using http (Tomcat) and, in particular cases, also ftp (service started by DHuS) on some dedicated service ports.</p>
<p ALIGN="JUSTIFY">The filesystems used by the application, can be two or more;</p>
<p ALIGN="JUSTIFY">&bull; one filesystem is needed for storing the DB where the products are indexed, along with the logs and application binaries. This filesystem needs to reside on the local disks.</p>
<p ALIGN="JUSTIFY">&bull; one or more filesystems are used for archiving the products. Given the volume of normal Sentinels production, it is also recommended to use an external disk for mounting the second filesystem, in order to cope with several TBs of products.</p>
<h3>System Requirements</h3>
<p>table</p>
<h3>Network Requirements</h3>
<p ALIGN="JUSTIFY">DHuS is accessed primarily via HTTP and FTP interface. The Installation procedure of the DHuS Software must be performed using a non-privileged user (not root); application installed in this way cannot start services listening on ports numbers smaller than 1024. By default the HTTP interface is reachable on 8080 port that must be opened for inbound requests. The DHuS FTP service is reachable, by default, on 2121.The DHuS provides also a mailing service based on an external SMTP server. Following table describes the default DHuS network ports configuration:</p>
<h3>Software Requirements</h3>
<p ALIGN="JUSTIFY">DHuS software is fully written in java and can be considered portable to any hardware platforms supported by JRE (Java Runtime Environment). The DHuS supports:</p>
<p ALIGN="JUSTIFY">- all the Java JDK versions before the 7th (version 8 not yet supported) - the Oracle distribution version 1.7.0_79. It is recommended to use a Linux Operating System working on a multithread environment running in 64bit.</p>
<h4>Java</h4>
<p ALIGN="JUSTIFY">The DHuS server requires Java Runtime Environment version 1.6+ being installed on the system.</p>
<h4>Mailining Service</h4>
<p ALIGN="JUSTIFY">An SMTP mail server should be made available to the DHuS System in order to allow its mailing functionalities.</p>
<h4>Apache Version</h4>
<p align="JUSTIFY">The proxy configuration is required in case the HTTPS protocol shall be used. In this case, make sure the apache version compatible with DHuS is the number 2.2.15 with modproxy and modssl. The httpd v command tells which config file Apache is using.
<h3>Installation and Setup</h3>
<ul>1. Create a user named dhus. Every step in the installation procedure, if not explicitly mentioned, shall be performed as dhus user.</ul>
<ul>2. Create the installation directory: mkdir -p [install-dir]</ul>
<ul>3. Download the DHuS package (shar package) and save it into the installation directory</ul>
<ul>4. Change the permissions on the file: chmod +x dhus-XX.XX.XX.shar</ul>
<ul>5. Launch ./dhus-XX.XX.XX.shar (the package will autoinstall).Once executed, the system setting configuration file can be accessed and updated.</ul>
<ul>6. Edit the etc/dhus.xml configuration file and modify the varFolder variable to an absolute path of your choice. This directory will contain the local archive, the incoming products, the database, etc. Eg: &lt;!ENTITY varFolder &ldquo; /home/dhus/local_dhus&rdquo;&gt;</ul>
<ul>7. Start the DHuS entering the following command in the installation directory:</ul>
<p align="JUSTIFY">nohup /bin/bash ./start.sh &amp;</p>
<p>The log files will be created in the installation directory.</p>
<h3>Software Configuration Manual</h3>
<p>DHuS configuration files are contained in the etc folder created after the launch of the .shar installation package: <ol>&bull;  Start.sh</ol><ol> &bull; dhus.xml</ol> <ol> &bull; server.xml </ol><ol> &bull; log4j2.xml</p>
<p>&nbsp;</p>

							table		
							
							
							
<h3>User Interface Configuration Manual</h3>	
<p ALIGN="JUSTIFY">The DHuS is equipped with AJS GUI. This section deals with the configurability of the AJS GUI which allows a wide set of configuration actions which do not need a restart of DHuS to be applied. Due to the growth of the different centres and related installations, a new configuration management module has been added into the AJS web app. It allows configuring various aspects of the GUI; mainly it is related to style, texts and layout:</p>
<table style="width:100%">
  <tr>
    <th>GUI Parameters</th>
    
  </tr>
  <tr>
    <td>Title (shown in the header bar)</td>
  </tr>
  <tr>
    <td>Sections visibility (Cart, Profile, Sign In)</td>
  </tr>
<tr>
    <td>URL and texts of the link logos (shown in the header panel</td>
  </tr>
<tr>
    <td>Version text (shown in the info panel)</td>
  </tr>
<tr>
    <td>Data Hub Logo (shown in the info panel)</td>
  </tr>
<tr>
    <td>Mission Tag (shown in the Product List panel)</td>
  </tr>
<tr>
    <td>Mission footprint style and color (shown in the Map panel)</td>
  </tr>
<tr>
    <td>Advanced Search Mission specific fields (shown in Advanced Search Panel)</td>
  </tr>
<tr>
    <td>Map Layer (shown in the Map View)</td>
  </tr>

</table>
<p  ALIGN="JUSTIFY">
Please note that all the settings are included in the client side (2 text files), thus it is possible to change a parameter without restarting the DHuS, but just doing a refresh via browser.</p>
							
							<h3>How to change a parameter?</h3>
							<p align="JUSTIFY">The files in charge of the GUI configuration management are located in:</p>
<ul>
<li>[DHUSDIR?]/var/tomcat/webapps/new/config They are:</li>
<li>appconfig.json (includes 1,2,3,4,5)</li>
<li>styles.json (includes 6,7)</li>
</ul>
							

							<h3>Advanced Configuration </h3>
						<p ALIGN="JUSTIFY">
						 A special attention goes to the configuration of the advanced search mission specific fields. The configuration file appconfig.json has been updated in order to manage mission specific filters</p>
						<p  ALIGN="JUSTIFY"> A "missions" section has been added, containing an array with the following structure:
"name": , "indexname": , "indexvalue":, "filters":[filter_array]
where [filter_array] is an array of mission-specific filters with the following structure:
"indexname": "indexlabel": "regex": [OPTIONAL] "indexvalues": (if present it appears a combobox containing the list of all specified values, otherwise nothing appears. present
Here below an example of filters configuration specific for S1 and S2 missions.</p>
<p ALIGN="JUSTIFY"> <strong><span style="background-color: #ffffff; color: #3366ff;"> 
"missions":

  [

{

"name": "Mission: Sentinel-1",
"indexname": "platformname",
"indexvalue": "Sentinel-1",
"filters": [
{

"indexname": "producttype",
"indexlabel": "Product Type (SLC,GRD,OCN)",
"indexvalues": "SLC|GRD|OCN",
"regex": ".*"
},

{
"indexname": "polarisationmode",
"indexlabel": "Polarisation (e.g.HH,VV,HV,VH,...)",
            "indexvalues": "HH|VV|HV|VH|HH+HV|VV+VH",
"regex": ".*"
},

{
"indexname": "sensoroperationalmode",
"indexlabel": "Sensor Mode (SM,IW,EW,WV)",
"indexvalues": "SM|IW|EW|WV",
"regex": ".*"

},
{
"indexname": "relativeorbitnumber",
"indexlabel": "Relative Orbit Number (from 1 to 175)",
        "regex": "[1-9]|[1-9][0-9]|[1-9][0-7][0-5]"
        }
]
},
{
"name": "Mission: Sentinel-2",
"indexname": "platformname",
"indexvalue": "Sentinel-2",
"filters": [
{
"indexname": "cloudcoverpercentage",
"indexlabel": "Cloud Cover % (e.g.[0 TO 9.4])"
}
        ]
}
]  
</span></strong></p>						
							<p ALIGN="JUSTIFY"> Once you have changed a value in the file, you only need to refresh your browser to see the change immediately applied. No need to restart the DHuS</p>
	
							
							<h3> Version Upgrade from 0.9.1-osf to 0.12.5-6-osf </h3>
							<p ALIGN="JUSTIFY"> In the following we describe the steps needed for migrating from a previous DHuS version (oldversion) to the new DHuS version 0.12.5-6-osf (newversion).
								First of all, backup the items you need to inherit:</p>
							
							<p ALIGN="JUSTIFY"> 1. Database folder (path attribute of tag in dhus.xml)</p>
							<p ALIGN="JUSTIFY">2. Solr folder (path attribute of tag in dhus.xml)</p>
							<p ALIGN="JUSTIFY">3. Products archive folder (path attribute of tag in dhus.xml)</p>
<p ALIGN="JUSTIFY">After you have installed the newversion following the procedure the easiest way is to have the newversion configured (in dhus.xml) to use the pre-existing DHuS archive, database and solr directories. Therefore, in dhus.xml of newversion set the following variables to the same value they have in your oldversion installation Alternatively, you may use the backed up copies in directory of your choice (as usual configured within dhus.xml).</p>
<p ALIGN="JUSTIFY"> In addition, set in dhus.xml
cryptType and cryptKey, specifying your database encryption key, or leave empty if your database is not encrypted. </p>


						
							
							
							
							</article>
                                 
                                 
                                 
                                 
				
					</div>
				</div>
			</div>
		</div>
	</section>
